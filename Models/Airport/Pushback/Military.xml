<?xml version="1.0"?>
<PropertyList>
   <path>Military.ac</path>

  <!-- Trucks models and artworks courtesy of XPGoodWay Team
(http://www.xpgoodwayteam.org/site_xpushback/) -->

   <animation>
    <type>select</type>
    <condition>
      <property>sim/model/pushback/enabled</property>
      <property>gear/gear[0]/wow</property>
    </condition>
  </animation>

  <!-- switch to night/day textures -->

 <animation>
   <type>textranslate</type>
   <object-name>BacklightLOff</object-name>
   <object-name>BacklightROff</object-name>
   <object-name>BacklightLOn</object-name>
   <object-name>BacklightROn</object-name>
   <object-name>Mesh</object-name>
   <object-name>Towbar</object-name>
   <object-name>TowbarWheelL</object-name>
   <object-name>TowbarWheelR</object-name>
   <object-name>WheelLB</object-name>
   <object-name>WheelLC</object-name>
   <object-name>WheelLF</object-name>
   <object-name>WheelRB</object-name>
   <object-name>WheelRC</object-name>
   <object-name>WheelRF</object-name>
   <property>/sim/time/sun-angle-rad</property>
   <step>1.60 </step>
   <factor>0.318471338</factor>
   <center>
     <x-m>0</x-m>
     <y-m>0</y-m>
     <z-m>0</z-m>
   </center>
   <axis>
     <x>-1</x>
     <y>0</y>
     <z>0</z>
   </axis>
 </animation>

 <animation>
   <type>material</type>
   <object-name>BacklightLOff</object-name>
   <object-name>BacklightROff</object-name>
   <object-name>BacklightLOn</object-name>
   <object-name>BacklightROn</object-name>
   <object-name>Mesh</object-name>
   <object-name>Towbar</object-name>
   <object-name>TowbarWheelL</object-name>
   <object-name>TowbarWheelR</object-name>
   <object-name>WheelLB</object-name>
   <object-name>WheelLC</object-name>
   <object-name>WheelLF</object-name>
   <object-name>WheelRB</object-name>
   <object-name>WheelRC</object-name>
   <object-name>WheelRF</object-name>
   <condition>		
     <greater-than>		
       <property>/sim/time/sun-angle-rad</property>
       <value>1.60</value>
     </greater-than>
   </condition>
   <emission>	
     <red>1</red>	
     <green>1</green>	
     <blue>1</blue>
   </emission>
 </animation>

 <animation>
   <type>material</type>
   <object-name>BacklightLOff</object-name>
   <object-name>BacklightROff</object-name>
   <object-name>BacklightLOn</object-name>
   <object-name>BacklightROn</object-name>
   <object-name>Mesh</object-name>
   <object-name>Towbar</object-name>
   <object-name>TowbarWheelL</object-name>
   <object-name>TowbarWheelR</object-name>
   <object-name>WheelLB</object-name>
   <object-name>WheelLC</object-name>
   <object-name>WheelLF</object-name>
   <object-name>WheelRB</object-name>
   <object-name>WheelRC</object-name>
   <object-name>WheelRF</object-name>
   <condition>		
     <less-than-equals>		
       <property>/sim/time/sun-angle-rad</property>
       <value>1.60</value>
     </less-than-equals>
   </condition>
   <emission>	
     <red>0</red>	
     <green>0</green>	
     <blue>0</blue>
   </emission>
 </animation>   <!-- compensate for pitch of aircraft, keep pushback level -->
  <animation>
    <type>rotate</type>
    <property>orientation/pitch-deg</property>
    <factor>-1</factor>
    <center>
      <x-m>0</x-m>
      <y-m>0</y-m>
      <z-m>0</z-m>
    </center>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>

  <!-- compensate for roll of aircraft, keep pushback level -->
  <animation>
    <type>rotate</type>
    <property>orientation/roll-deg</property>
    <factor>1</factor>
    <center>
      <x-m>0</x-m>
      <y-m>0</y-m>
      <z-m>0</z-m>
    </center>
    <axis>
      <x>1</x>
      <y>0</y>
      <z>0</z>
    </axis>
  </animation>

  <animation>
    <type>timed</type>
    <object-name>BacklightOn</object-name>
    <object-name>BacklightOff</object-name>
    <use-personality type="bool">true</use-personality>
    <branch-duration-sec>0.8</branch-duration-sec>
    <branch-duration-sec>0.2</branch-duration-sec>
  </animation>

  <animation>
   <type>rotate</type>
   <object-name>Towbar</object-name>
   <object-name>TowbarWheelL</object-name>
   <object-name>TowbarWheelR</object-name>
   <object-name>BacklightLOff</object-name>
   <object-name>BacklightROff</object-name>
   <object-name>BacklightLOn</object-name>
   <object-name>BacklightROn</object-name>
   <object-name>Mesh</object-name>
   <object-name>Mesh.001</object-name>
   <object-name>WheelLB</object-name>
   <object-name>WheelLC</object-name>
   <object-name>WheelLF</object-name>
   <object-name>WheelRB</object-name>
   <object-name>WheelRC</object-name>
   <object-name>WheelRF</object-name>
   <object-name>haze</object-name>
   <condition>
     <greater-than>
       <property>sim/model/pushback/position-norm</property>
       <value>0.99</value>
     </greater-than>
   </condition>
   <property>gear/gear[0]/steering-norm</property>
   <factor>-35</factor>
   <center>
     <x-m>0.00</x-m>
     <y-m>0.00</y-m>
     <z-m>0.00</z-m>
   </center>
   <axis>
     <x>0</x>
     <y>0</y>
     <z>1</z>
   </axis>
 </animation>

 <animation>
   <type>rotate</type>
   <object-name>BacklightLOff</object-name>
   <object-name>BacklightROff</object-name>
   <object-name>BacklightLOn</object-name>
   <object-name>BacklightROn</object-name>
   <object-name>Mesh</object-name>
   <object-name>Mesh.001</object-name>
   <object-name>WheelLB</object-name>
   <object-name>WheelLC</object-name>
   <object-name>WheelLF</object-name>
   <object-name>WheelRB</object-name>
   <object-name>WheelRC</object-name>
   <object-name>WheelRF</object-name>
   <object-name>haze</object-name>
   <condition>
     <greater-than>
       <property>sim/model/pushback/position-norm</property>
       <value>0.99</value>
     </greater-than>
   </condition>
   <property>gear/gear[0]/steering-norm</property>
   <factor>-35</factor>
   <center>
      <x-m>-4.37</x-m>
      <y-m>0.00</y-m>
      <z-m>0.00</z-m>
   </center>
   <axis>
     <x>0</x>
     <y>0</y>
     <z>1</z>
   </axis>
 </animation>

  <animation>
    <type>spin</type>
    <object-name>WheelLF</object-name>
    <object-name>WheelRF</object-name>
    <property>velocities/uBody-fps</property>
    <factor>-5.292</factor>
    <center>
      <x-m>-9.81971</x-m>
      <y-m>0</y-m>
      <z-m>0.546382</z-m>
    </center>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>

  <animation>
    <type>spin</type>
    <object-name>WheelLC</object-name>
    <object-name>WheelRC</object-name>
    <property>velocities/uBody-fps</property>
    <factor>-5.292</factor>
    <center>
      <x-m>-6.41481</x-m>
      <y-m>0</y-m>
      <z-m>0.546382</z-m>
    </center>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>

  <animation>
    <type>spin</type>
    <object-name>WheelLB</object-name>
    <object-name>WheelRB</object-name>
    <property>velocities/uBody-fps</property>
    <factor>-5.292</factor>
    <center>
      <x-m>-5.22756</x-m>
      <y-m>0</y-m>
      <z-m>0.546382</z-m>
    </center>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>

  <animation>
    <type>spin</type>
    <object-name>TowbarWheelL</object-name>
    <object-name>TowbarWheelR</object-name>
    <property>velocities/uBody-fps</property>
    <factor>-16.17</factor>
    <center>
      <x-m>-1.87996</x-m>
      <y-m>0</y-m>
      <z-m>0.190432</z-m>
    </center>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
</animation>

  <!-- change heading of the pushback when driving the arc -->
  <animation>
    <type>rotate</type>
    <property>sim/model/pushback/position-norm</property>
    <factor>-90</factor>
    <offset-deg>90</offset-deg>
    <center>
      <x-m>-7.3</x-m>
      <y-m>0</y-m>
      <z-m>0</z-m>
    </center>
    <axis>
      <x>0</x>
      <y>0</y>
      <z>1</z>
    </axis>
  </animation>

  <!-- compensate for gear compression -->   <animation>
    <type>translate</type>
    <property>gear/gear[0]/compression-ft</property>
    <factor>0.3048</factor>
    <axis>
      <x>0</x>
      <y>0</y>
      <z>1</z>
    </axis>
  </animation>

  <!-- precalculated sin and asin to move the pushback on a 90deg arc, 25m radius -->
  <animation>
    <type>translate</type>
    <property>sim/model/pushback/position-norm</property>
    <interpolation>
      <entry><ind>1.000000</ind><dep>0.000000</dep></entry>
      <entry><ind>0.950000</ind><dep>1.961477</dep></entry>
      <entry><ind>0.900000</ind><dep>3.910862</dep></entry>
      <entry><ind>0.850000</ind><dep>5.836134</dep></entry>
      <entry><ind>0.800000</ind><dep>7.725425</dep></entry>
      <entry><ind>0.750000</ind><dep>9.567086</dep></entry>
      <entry><ind>0.700000</ind><dep>11.349763</dep></entry>
      <entry><ind>0.650000</ind><dep>13.062464</dep></entry>
      <entry><ind>0.600000</ind><dep>14.694631</dep></entry>
      <entry><ind>0.550000</ind><dep>16.236201</dep></entry>
      <entry><ind>0.500000</ind><dep>17.677670</dep></entry>
      <entry><ind>0.450000</ind><dep>19.010149</dep></entry>
      <entry><ind>0.400000</ind><dep>20.225425</dep></entry>
      <entry><ind>0.350000</ind><dep>21.316004</dep></entry>
      <entry><ind>0.300000</ind><dep>22.275163</dep></entry>
      <entry><ind>0.250000</ind><dep>23.096988</dep></entry>
      <entry><ind>0.200000</ind><dep>23.776413</dep></entry>
      <entry><ind>0.150000</ind><dep>24.309248</dep></entry>
      <entry><ind>0.100000</ind><dep>24.692209</dep></entry>
      <entry><ind>0.050000</ind><dep>24.922933</dep></entry>
      <entry><ind>0.000000</ind><dep>25.000000</dep></entry>
    </interpolation>
    <axis>
      <x>-1</x>
      <y>0</y>
      <z>0</z>
    </axis>
  </animation>

  <animation>
    <type>translate</type>
    <property>sim/model/pushback/position-norm</property>
    <interpolation>
    <entry><ind>1.000000</ind><dep>0.000000</dep></entry>
    <entry><ind>0.950000</ind><dep>0.077067</dep></entry>
    <entry><ind>0.900000</ind><dep>0.307791</dep></entry>
    <entry><ind>0.850000</ind><dep>0.690752</dep></entry>
    <entry><ind>0.800000</ind><dep>1.223587</dep></entry>
    <entry><ind>0.750000</ind><dep>1.903012</dep></entry>
    <entry><ind>0.700000</ind><dep>2.724837</dep></entry>
    <entry><ind>0.650000</ind><dep>3.683996</dep></entry>
    <entry><ind>0.600000</ind><dep>4.774575</dep></entry>
    <entry><ind>0.550000</ind><dep>5.989851</dep></entry>
    <entry><ind>0.500000</ind><dep>7.322330</dep></entry>
    <entry><ind>0.450000</ind><dep>8.763799</dep></entry>
    <entry><ind>0.400000</ind><dep>10.305369</dep></entry>
    <entry><ind>0.350000</ind><dep>11.937536</dep></entry>
    <entry><ind>0.300000</ind><dep>13.650238</dep></entry>
    <entry><ind>0.250000</ind><dep>15.432914</dep></entry>
    <entry><ind>0.200000</ind><dep>17.274575</dep></entry>
    <entry><ind>0.150000</ind><dep>19.163866</dep></entry>
    <entry><ind>0.100000</ind><dep>21.089138</dep></entry>
    <entry><ind>0.050000</ind><dep>23.038523</dep></entry>
    <entry><ind>0.000000</ind><dep>25.000000</dep></entry>
    </interpolation>
    <axis>
      <x>0</x>
      <y>-1</y>
      <z>0</z>
    </axis>
  </animation>

  <particlesystem>

    <type>normal</type>
    <name>haze</name>
    <texture>Military-smoke.png</texture>
    <emissive>false</emissive>
    <lighting>true</lighting>

    <offsets>
      <x-m>-7.97326</x-m>
      <y-m>0.924717</y-m>
      <z-m>2.94923</z-m>
    </offsets>

    <attach>world</attach>

    <placer>
      <type>point</type>
    </placer>

    <shooter>
      <theta-min-deg>0</theta-min-deg>
      <theta-max-deg>0</theta-max-deg>
      <phi-min-deg>0</phi-min-deg>
      <phi-max-deg>0</phi-max-deg>
      <speed-mps>
        <property>/sim/model/pushback/force</property>
        <factor>0.005</factor>
        <offset-m>5</offset-m>
        <spread>0</spread>
        <min-m>1</min-m>
        <max-m>20</max-m>
      </speed-mps>
      <rotation-speed>
        <x-max-deg-sec>0</x-max-deg-sec>
        <x-min-deg-sec>0</x-min-deg-sec>
        <y-max-deg-sec>0</y-max-deg-sec>
        <y-min-deg-sec>0</y-min-deg-sec>
        <z-max-deg-sec>0</z-max-deg-sec>
        <z-min-deg-sec>0</z-min-deg-sec>
      </rotation-speed>
    </shooter>

    <counter>
      <particles-per-sec>
        <property>/sim/model/pushback/force</property>
        <factor>0.005</factor>
        <offset-m>5</offset-m>
        <spread>0</spread>
        <min-m>5</min-m>
        <max-m>20</max-m>
      </particles-per-sec>
    </counter>

    <align>billboard</align>

    <particle>
      <start>
        <color>
          <red>
            <value>1.0</value>
          </red>
          <green>
            <value>1.0</value>
          </green>
          <blue>
            <value>1.0</value>
          </blue>
          <alpha>
            <value>0.20</value>
          </alpha>
        </color>
        <size>
          <value>0.1</value>
        </size>
      </start>
      <end>
        <color>
          <red>
            <value>0.0</value>
          </red>
          <green>
            <value>0.0</value>
          </green>
          <blue>
            <value>0.0</value>
          </blue>
          <alpha>
            <value>1.000</value>
          </alpha>
        </color>
        <size>
          <value>3</value>
        </size>
      </end>
      <life-sec>
        <value>3.0</value>
      </life-sec>
      <mass-kg>0.05</mass-kg>
      <radius-m>0.3</radius-m>
    </particle>

    <program>
      <fluid>air</fluid>
      <gravity>true</gravity>
      <wind>true</wind>
    </program>

  </particlesystem>

</PropertyList>
